(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["ftp-account"],{

/***/ "./src/pages/ftp-accounts/ftp-accounts.hbs":
/*!*************************************************!*\
  !*** ./src/pages/ftp-accounts/ftp-accounts.hbs ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\"main list\\\" id=\\\"ftp-accounts\\\">{{{list}}}</div>\");\n\n//# sourceURL=webpack:///./src/pages/ftp-accounts/ftp-accounts.hbs?");

/***/ }),

/***/ "./src/pages/ftp-accounts/ftp-accounts.include.js":
/*!********************************************************!*\
  !*** ./src/pages/ftp-accounts/ftp-accounts.include.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var html_tag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! html-tag-js */ \"./node_modules/html-tag-js/dist/tag.js\");\n/* harmony import */ var html_tag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(html_tag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var mustache__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mustache */ \"./node_modules/mustache/mustache.js\");\n/* harmony import */ var mustache__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mustache__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _modules_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../modules/helpers */ \"./src/modules/helpers.js\");\n/* harmony import */ var _components_page__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../components/page */ \"./src/components/page.js\");\n/* harmony import */ var _ftp_accounts_hbs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ftp-accounts.hbs */ \"./src/pages/ftp-accounts/ftp-accounts.hbs\");\n/* harmony import */ var _list_hbs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./list.hbs */ \"./src/pages/ftp-accounts/list.hbs\");\n/* harmony import */ var _ftp_accounts_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ftp-accounts.scss */ \"./src/pages/ftp-accounts/ftp-accounts.scss\");\n/* harmony import */ var _ftp_accounts_scss__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_ftp_accounts_scss__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _components_searchbar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../components/searchbar */ \"./src/components/searchbar.js\");\n/* harmony import */ var _components_dialogs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../components/dialogs */ \"./src/components/dialogs.js\");\n/* harmony import */ var _modules_utils_remoteFs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../modules/utils/remoteFs */ \"./src/modules/utils/remoteFs.js\");\n/* harmony import */ var _modules_addFolder__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../modules/addFolder */ \"./src/modules/addFolder.js\");\n\n\n\n\n\n\n\n\n\n\n\n\nfunction FTPAccountsInclude() {\n  var accounts = JSON.parse(localStorage.ftpaccounts || '[]');\n  var $search = html_tag_js__WEBPACK_IMPORTED_MODULE_0___default()('span', {\n    className: 'icon search',\n    attr: {\n      action: \"search\"\n    }\n  });\n  var $page = Object(_components_page__WEBPACK_IMPORTED_MODULE_3__[\"default\"])('FTP Accounts');\n  var credentials = _modules_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].credentials;\n  var $content = html_tag_js__WEBPACK_IMPORTED_MODULE_0___default.a.parse(mustache__WEBPACK_IMPORTED_MODULE_1___default.a.render(_ftp_accounts_hbs__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n    list: mustache__WEBPACK_IMPORTED_MODULE_1___default.a.render(_list_hbs__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n      accounts: decryptAccounts()\n    })\n  }));\n  $content.addEventListener('click', handleClick);\n  $page.querySelector('header').append($search);\n\n  $search.onclick = function () {\n    Object(_components_searchbar__WEBPACK_IMPORTED_MODULE_7__[\"default\"])($page.querySelector('.list'));\n  };\n\n  $page.append($content);\n  app.appendChild($page);\n  actionStack.push({\n    id: 'repos',\n    action: $page.hide\n  });\n\n  $page.onhide = function () {\n    actionStack.remove('repos');\n  };\n  /**\n   * \n   * @param {Event} e \n   */\n\n\n  function handleClick(e) {\n    var $target = e.target;\n    if (!($target instanceof HTMLElement)) return;\n    var action = $target.getAttribute('action');\n    if (!action) return;\n\n    if (action === 'add-account') {\n      addAccount();\n    } else if (action === 'remove') {\n      var $parent = $target.parentElement;\n      if (!$parent) return;\n      var id = $parent.id;\n      if (!id) return;\n      remove(id);\n    } else if (action === 'ftp-account' || action === \"edit\") {\n      if (action === \"edit\") $target = $target.parentElement;\n      var username = $target.getAttribute(\"username\");\n      var password = $target.getAttribute(\"password\");\n      var hostname = $target.getAttribute(\"hostname\");\n      var port = $target.getAttribute(\"port\");\n\n      var _path = $target.getAttribute(\"path\");\n\n      var _id = $target.id;\n\n      if (action === 'edit') {\n        addAccount(username, password, hostname, _path, port, _id);\n      } else {\n        var fs = Object(_modules_utils_remoteFs__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(username, password, hostname, port, _path);\n        Object(_modules_addFolder__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(fs.origin, {\n          saveState: false,\n          reloadOnResume: false\n        });\n        actionStack.pop();\n      }\n    }\n  }\n\n  function addAccount(username, password, hostname, path, port, id) {\n    prompt(username, password, hostname, path, port, id).then(function (values) {\n      var username = values.username,\n          password = values.password,\n          hostname = values.hostname,\n          port = values.port,\n          path = values.path;\n      if (id) remove(id);\n      if (Array.isArray(accounts)) accounts.push({\n        username: credentials.encrypt(username),\n        password: credentials.encrypt(password),\n        hostname: credentials.encrypt(hostname),\n        port: credentials.encrypt(port),\n        path: path && credentials.encrypt(path),\n        id: id || _modules_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].uuid()\n      });\n      localStorage.setItem('ftpaccounts', JSON.stringify(accounts));\n      $content.innerHTML = mustache__WEBPACK_IMPORTED_MODULE_1___default.a.render(_list_hbs__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n        accounts: decryptAccounts()\n      });\n    });\n  }\n\n  function decryptAccounts() {\n    var temp = [];\n    if (Array.isArray(accounts)) accounts.map(function (account) {\n      var username = account.username,\n          password = account.password,\n          hostname = account.hostname,\n          port = account.port,\n          id = account.id;\n      temp.push({\n        username: credentials.decrypt(username),\n        password: credentials.decrypt(password),\n        hostname: credentials.decrypt(hostname),\n        path: path && credentials.decrypt(path),\n        port: credentials.decrypt(port),\n        id: id\n      });\n      return account;\n    });\n    return temp;\n  }\n\n  function remove(id) {\n    if (Array.isArray(accounts)) accounts = accounts.filter(function (account) {\n      return account.id !== id;\n    });\n    $content.innerHTML = mustache__WEBPACK_IMPORTED_MODULE_1___default.a.render(_list_hbs__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n      accounts: decryptAccounts()\n    });\n    localStorage.setItem('ftpaccounts', JSON.stringify(accounts));\n  }\n\n  function prompt(username, password, hostname, path) {\n    var port = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 21;\n    return _components_dialogs__WEBPACK_IMPORTED_MODULE_8__[\"default\"].multiPrompt('FTP/SFTP login', [{\n      id: \"username\",\n      placeholder: \"username (optional)\",\n      type: \"text\",\n      value: username\n    }, {\n      id: \"password\",\n      placeholder: \"password (optional)\",\n      type: \"password\",\n      value: password\n    }, {\n      id: \"hostname\",\n      placeholder: \"hostname\",\n      type: \"text\",\n      required: true,\n      value: hostname\n    }, {\n      id: \"path\",\n      placeholder: \"path (optional)\",\n      type: \"text\",\n      value: path\n    }, {\n      id: \"port\",\n      placeholder: \"port (optional)\",\n      type: \"number\",\n      value: port\n    }]);\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FTPAccountsInclude);\n\n//# sourceURL=webpack:///./src/pages/ftp-accounts/ftp-accounts.include.js?");

/***/ }),

/***/ "./src/pages/ftp-accounts/ftp-accounts.scss":
/*!**************************************************!*\
  !*** ./src/pages/ftp-accounts/ftp-accounts.scss ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/pages/ftp-accounts/ftp-accounts.scss?");

/***/ }),

/***/ "./src/pages/ftp-accounts/list.hbs":
/*!*****************************************!*\
  !*** ./src/pages/ftp-accounts/list.hbs ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"{{#accounts}}\\n<div class=\\\"list-item\\\" action=\\\"ftp-account\\\" path=\\\"{{path}}\\\" username=\\\"{{username}}\\\" password=\\\"{{password}}\\\"\\n  hostname=\\\"{{hostname}}\\\" port=\\\"{{port}}\\\" id=\\\"{{id}}\\\">\\n  <span class=\\\"icon person\\\"></span>\\n  <div class=\\\"container\\\">\\n    <div class=\\\"text\\\">\\n      <span>{{username}}@{{hostname}}</span>\\n    </div>\\n  </div>\\n  <span class=\\\"icon edit\\\" action=\\\"edit\\\"></span>\\n  <span class=\\\"icon clearclose\\\" action=\\\"remove\\\"></span>\\n</div>\\n{{/accounts}}\\n<div class=\\\"list-item\\\" action=\\\"add-account\\\">\\n  <span class=\\\"icon add\\\"></span>\\n  <div class=\\\"container\\\">\\n    <div class=\\\"text\\\">\\n      <span>Add FTP account</span>\\n    </div>\\n  </div>\\n</div>\");\n\n//# sourceURL=webpack:///./src/pages/ftp-accounts/list.hbs?");

/***/ })

}]);